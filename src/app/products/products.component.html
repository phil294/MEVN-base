<div fxLayout="column" fxLayoutAlign="center center">
	<div class="box padding">
		<h3 class="padding">products</h3>
		<table id="result" *ngIf="val(searchResponse.products); else noResultsTempl; let products" class="padding">
			<tr class="padding">
				<th class="padding">Name</th>
				<th *ngFor="let attribute of searchResponse.attributes" class="padding">
					{{attribute.name}}: {{attribute.description}}
				</th>
			</tr>
			<tr *ngFor="let product of searchResponse.products">
				<td class="padding" fxLayout="row" fxLayoutAlign="start center">
					<i class="material-icons" (click)="deleteProduct(product)">delete</i>
					<editable-value-dialog
							[value]="product.name"
							(valueChanged)="changeProductName(product, $event)">
					</editable-value-dialog>
				</td>
				<td *ngFor="let attribute of searchResponse.attributes" class="padding">
					<editable-value-dialog
							[value]="val(product.productData[attribute.id])? product.productData[attribute.id].value : ''"
							[unit]="attribute.unit"
							(valueChanged)="changeProductValue(product, attribute, $event)">
					</editable-value-dialog>
				</td>
			</tr>
			<tr class="padding">
				<i class="material-icons" (click)="showAddDialog=true" *ngIf="!showAddDialog">add_box</i>
				<i class="material-icons" (click)="showAddDialog=false" *ngIf="showAddDialog">remove_circle</i>
				<div *ngIf="showAddDialog">
					<form (ngSubmit)="showAddDialog=false ; addProduct(newProduct)">
						<label>Add new entry:
							<input type="text" [(ngModel)]="newProduct.name" name="name" /></label>
						<input type="submit" value="Ok" />
					</form>
				</div>
			</tr>
		</table>
		<ng-template #noResultsTempl>
			No results
		</ng-template>
	</div>
</div>